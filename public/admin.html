<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administration - Vertigo RP Dashboard</title>
    
    <!-- Styles CSS -->
    <link rel="stylesheet" href="/css/admin-style.css">
    
    <!-- Scripts JavaScript -->
    <script src="/js/auth-admin.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <div class="logo">
                <img src="/resources/images/logo.png" alt="Vertigo RP" class="logo-image">
                <span>ADMIN PANEL</span>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link">üìä Dashboard</a>
                <a href="/admin.html" class="nav-link">‚öôÔ∏è Administration</a>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">Gestion des Utilisateurs</h1>
            <p class="page-subtitle">G√©rez les acc√®s et les permissions des membres du staff</p>
        </div>

        <!-- Stats -->
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="stat-number">-</div>
                <div class="stat-label">Utilisateurs Total</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">-</div>
                <div class="stat-label">Avec Acc√®s Dashboard</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">-</div>
                <div class="stat-label">Super Admins</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">-</div>
                <div class="stat-label">Actifs (7 derniers jours)</div>
            </div>
        </div>

        <!-- Actions Bar -->
        <div class="actions-bar">
            <button class="btn btn-primary" onclick="openAddUserModal()">
                ‚ûï Ajouter un utilisateur
            </button>
            <button class="btn" onclick="loadUsers()">
                üîÑ Actualiser
            </button>
        </div>

        <!-- Users Table -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Utilisateur</th>
                        <th>R√¥les</th>
                        <th>Acc√®s Dashboard</th>
                        <th>Gestion Votes</th>
                        <th>Statut</th>
                        <th>Derni√®re connexion</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="usersTableBody">
                    <tr>
                        <td colspan="7">
                            <div class="loading">
                                <div class="spinner"></div>
                                <div>Chargement des utilisateurs...</div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Modal Add User -->
    <div class="modal" id="addUserModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Ajouter un utilisateur</h2>
                <button class="close-btn" onclick="closeAddUserModal()">‚úñ</button>
            </div>
            <div class="modal-body">
                <div id="addUserAlert"></div>
                
                <div class="form-group">
                    <label class="form-label">Discord ID *</label>
                    <input 
                        type="text" 
                        class="form-input" 
                        id="discordIdInput" 
                        placeholder="343134692444209153"
                    >
                    <small style="color: var(--text-muted); font-size: 0.8rem; margin-top: 0.25rem; display: block;">
                        Pour obtenir un Discord ID : Mode D√©veloppeur ‚Üí Clic droit sur l'utilisateur ‚Üí Copier l'identifiant
                    </small>
                </div>

                <div class="form-group">
                    <label class="checkbox-group">
                        <input type="checkbox" id="canAccessCheckbox">
                        <span>Donner acc√®s au dashboard</span>
                    </label>
                </div>

                <div class="form-group">
                    <label class="form-label">R√¥les</label>
                    <div class="roles-checkboxes" id="rolesCheckboxes">
                        <!-- R√¥les charg√©s dynamiquement -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="closeAddUserModal()">Annuler</button>
                <button class="btn btn-primary" onclick="addUser()">Ajouter</button>
            </div>
        </div>
    </div>

    <!-- Modal Edit User -->
    <div class="modal" id="editUserModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Modifier l'utilisateur</h2>
                <button class="close-btn" onclick="closeEditUserModal()">‚úñ</button>
            </div>
            <div class="modal-body">
                <div id="editUserAlert"></div>
                
                <input type="hidden" id="editUserId">
                
                <div class="form-group">
                    <label class="form-label">Utilisateur</label>
                    <div id="editUserInfo"></div>
                </div>

               <div class="form-group">
                    <label class="checkbox-group">
                        <input type="checkbox" id="editCanAccessCheckbox">
                        <span>Acc√®s au dashboard</span>
                    </label>
                </div>

                <div class="form-group">
                    <label class="checkbox-group">
                        <input type="checkbox" id="editCanManageVotesCheckbox">
                        <span>üó≥Ô∏è Peut g√©rer les votes</span>
                    </label>
                </div>

                <div class="form-group">
                    <label class="checkbox-group">
                        <input type="checkbox" id="editIsActiveCheckbox">
                        <span>Compte actif</span>
                    </label>
                </div>

                <div class="form-group">
                    <label class="form-label">R√¥les</label>
                    <div class="roles-checkboxes" id="editRolesCheckboxes">
                        <!-- R√¥les charg√©s dynamiquement -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" onclick="closeEditUserModal()">Annuler</button>
                <button class="btn btn-primary" onclick="saveUser()">Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- Script JavaScript principal -->
    <script src="/js/admin.js"></script>
</body>
</html>
